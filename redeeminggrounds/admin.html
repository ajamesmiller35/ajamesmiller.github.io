<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="bootstrap-rg.css">
    <link rel="stylesheet" href="rgstyles.css">
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Syncopate:400,700" rel="stylesheet">
    <link rel="icon" href="images/rg-icon-green.png">
    <title>Redeeming Grounds Coffee</title>
  </head>
  <body>
    <img id="rg-banner" src="images/rg-logo.png">
    <div class="chalkboard">
            <div class="container">
                <p class="rg-info text-white h1">Sign In:</p>
                <div class="divider">
                    </div>
                <form id="sign-on">
                    <h2 class="text-center text-white">Sign In:</h2>
                    <div id="bad-login" class="alert alert-danger" role="alert">
                        Username or password incorrect!
                    </div>
                    <div class="form-group">
                      <label for="sign-in-email">Email address</label>
                      <input type="email" class="form-control" id="sign-in-email" aria-describedby="emailHelp" placeholder="Enter email">
                      <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                    </div>
                    <div class="form-group">
                      <label for="sign-in-password">Password</label>
                      <input type="password" class="form-control" id="sign-in-password" placeholder="Password">
                    </div>
                    <button type="submit" class="btn btn-secondary">Sign In</button>
                  </form>
                    <div class="divider">
                    </div>
            </div><!--container-->
        </div><!--chalkboard-->
    <div class="chalkboard">
        <div class="container">
            <p class="rg-info text-white h1">Administrator Contact:</p>
            <div class="divider"></div>
              <div class="footer-info-box row">               
                  <a id="admin-mail" href="mailto:admin@dixondrug.com"><img class="social-icon" src="images/email-icon.png"/></a>
            </div><!--footer-info-box-->
              <div class="divider"></div>
          </div><!--row-->
        </div><!--container-->
    </div><!--chalkboard-->
      
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="../plugins/jquery/jquery.js"></script>
    <script src="../plugins/popper/popper.min.js"></script>
    <script src="../plugins/bootstrap/js/bootstrap.js"></script>
    <script src="../plugins/waypoints/jquery.waypoints.min.js"></script>
    <script src="../plugins/slick/slick.min.js"></script>
    <script src="../plugins/smoothscroll/SmoothScroll.min.js"></script>
    <script src="fix-nav.js"></script>
    <script src="clickscroll-rg.js"></script>
    <script src="collapse-rg.js"></script>
    <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/5.11.0/firebase-app.js"></script>

    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/5.11.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.11.0/firebase-database.js"></script>

    <script>
            $(document).on('click', '#create', function(event){
                event.preventDefault();
                window.location.href="create.html";
            });
    </script>

    <script>
     // Your web app's Firebase configuration
    var firebaseConfig = {
    apiKey: "AIzaSyBFpRUDRWdeGNtfWg7CcM_m-1Y-sVmcTPg",
    authDomain: "redeeming-grounds.firebaseapp.com",
    databaseURL: "https://redeeming-grounds.firebaseio.com",
    projectId: "redeeming-grounds",
    storageBucket: "redeeming-grounds.appspot.com",
    messagingSenderId: "623286935158",
    appId: "1:623286935158:web:c5301b5e11b696f2"
  };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    $(document).on('submit', '#sign-on', function(event){
        event.preventDefault();
    firebase.auth().signInWithEmailAndPassword($('#sign-in-email').val(), $('#sign-in-password').val()).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        console.log($('#sign-in-email').val());
        console.log($('#sign-in-password').val());
        $('#bad-login').css('display', 'block');
    });
    });

    firebase.auth().onAuthStateChanged(function(user) {
        console.log(user);

        if(user != null){
            window.location.href="update.html";
        }
        else{
            //$('#bad-login').css('display', 'block');
        }
    });
    
    </script>
  </body>
</html>